
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <title>美食地图</title>
            <style>
                html, body, #map-container {
                    width: 100%;
                    height: 100%;
                    margin: 0;
                    padding: 0;
                }
            </style>
            <script type="text/javascript" src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=OBUkmzeyCj9vCfell3YPGqKGN47Sj9LJ"></script>
        </head>
        <body>
            <div id="map-container"></div>
            <script>
                // 全局变量
                var map;
                var viewMode = "country";
                var markers = [];
                
                // 初始化地图
                function initMap() {
                    map = new BMapGL.Map("map-container");
                    var point = new BMapGL.Point(116.404, 39.915); // 默认北京
                    map.centerAndZoom(point, 5);  // 全国视图
                    
                    // 启用滚轮缩放和平移
                    map.enableScrollWheelZoom();
                    map.enableDragging();
                    
                    // 添加控件
                    map.addControl(new BMapGL.NavigationControl());
                    map.addControl(new BMapGL.ScaleControl());
                    
                    // 添加测试标记
                    setTimeout(function() {
                        addFoodMarker(116.404, 39.915, "测试点", 8, 0);
                    }, 1000);
                }
                
                // 添加食物标记
                function addFoodMarker(lng, lat, name, rating, id) {
                    var point = new BMapGL.Point(lng, lat);
                    
                    // 根据评分设置颜色
                    var color = getColorByRating(rating);
                    
                    // 创建标记
                    var marker = new BMapGL.Marker(point);
                    marker.setTitle(name);
                    
                    // 添加点击事件
                    marker.addEventListener("click", function() {
                        alert("点击了: " + name + " (评分: " + rating + ")");
                    });
                    
                    // 添加到地图
                    map.addOverlay(marker);
                    markers.push(marker);
                    
                    // 添加探索范围圆
                    var radius = (viewMode === "city") ? 1000 : 10000;
                    var circle = new BMapGL.Circle(point, radius, {
                        strokeColor: color,
                        strokeWeight: 1,
                        strokeOpacity: 0.5,
                        fillColor: color,
                        fillOpacity: 0.2
                    });
                    
                    map.addOverlay(circle);
                    
                    return marker;
                }
                
                // 根据评分获取颜色
                function getColorByRating(rating) {
                    if (rating >= 9) return "#FF4500";  // 橙红色
                    if (rating >= 8) return "#FF8C00";  // 深橙色
                    if (rating >= 7) return "#FFD700";  // 金色
                    if (rating >= 6) return "#9ACD32";  // 黄绿色
                    if (rating >= 5) return "#32CD32";  // 酸橙绿
                    return "#1E90FF";                   // 道奇蓝
                }
                
                // 设置视图模式
                function setViewMode(mode) {
                    viewMode = mode;
                    if (mode === "country") {
                        map.setZoom(5);
                    } else {
                        map.setZoom(12);
                    }
                }
                
                // 设置城市
                function setCity(cityName) {
                    var myGeo = new BMapGL.Geocoder();
                    myGeo.getPoint(cityName, function(point) {
                        if (point) {
                            map.centerAndZoom(point, viewMode === "country" ? 5 : 12);
                        }
                    }, cityName);
                }
                
                // 清除所有标记
                function clearMarkers() {
                    for (var i = 0; i < markers.length; i++) {
                        map.removeOverlay(markers[i]);
                    }
                    markers = [];
                    map.clearOverlays();
                }
                
                // 高亮显示标记
                function highlightMarker(id) {
                    // 实现高亮逻辑
                }
                
                // 页面加载完成后初始化地图
                window.onload = initMap;
            </script>
        </body>
        </html>
        